import{Ca as m,a as c,b as r,c as o}from"./chunk-BXOCLV3Y.js";import{a as p,i as s}from"./chunk-VZEDPC34.js";var d=(()=>{let a=class a{constructor(t){this.storage=t,this._storage=null,this.EVENTS_KEY="eventos",this._initPromise=this.init()}init(){return s(this,null,function*(){let t=yield this.storage.create();this._storage=t})}getEvents(){return s(this,null,function*(){return yield this._initPromise,(yield this._storage?.get(this.EVENTS_KEY))||[]})}setEvents(t){return s(this,null,function*(){yield this._initPromise,yield this._storage?.set(this.EVENTS_KEY,t)})}};a.\u0275fac=function(e){return new(e||a)(o(m))},a.\u0275prov=r({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var E=(()=>{let a=class a{constructor(t){this.storageService=t,this.events=[],this.events$=new c([]),this.loadEvents()}loadEvents(){return s(this,null,function*(){let t=yield this.storageService.getEvents();t?this.events=t:(this.events=[{id:0,title:"Trip to Vegas",date:"2023-10-01",description:"Viaje con amigos a Las Vegas",participants:[{name:"Ana",pagado:!1,montoApagar:0},{name:"Luis",pagado:!1,montoApagar:0},{name:"Pedro",pagado:!1,montoApagar:0},{name:"Sof\xEDa",pagado:!1,montoApagar:0},{name:"Miguel",pagado:!1,montoApagar:0}],items:[],incluyePropina:!1},{id:1,title:"Swim lessons",date:"2023-10-02",description:"Clases de nataci\xF3n para ni\xF1os",participants:[{name:"Carlos",pagado:!1,montoApagar:0},{name:"Marta",pagado:!1,montoApagar:0},{name:"Luc\xEDa",pagado:!1,montoApagar:0},{name:"Andr\xE9s",pagado:!1,montoApagar:0}],items:[{id:0,name:"Swim Gear",price:50,participant:["Carlos"]},{id:1,name:"Pool Passes",price:10,participant:[]}],incluyePropina:!0},{id:2,title:"Family Calendar Meeting",date:"2023-10-03",description:"Reuni\xF3n familiar para organizar el calendario",participants:[{name:"Juan",pagado:!1,montoApagar:0},{name:"Mar\xEDa",pagado:!1,montoApagar:0},{name:"Elena",pagado:!1,montoApagar:0},{name:"Pablo",pagado:!1,montoApagar:0},{name:"Familia",pagado:!1,montoApagar:0}],items:[{id:0,name:"Agenda",price:5,participant:[]},{id:1,name:"Snacks",price:10,participant:[]}],incluyePropina:!1}],yield this.saveEvents()),this.events$.next(this.events)})}saveEvents(){return s(this,null,function*(){yield this.storageService.setEvents(this.events),this.events$.next(this.events)})}getEvents(){return this.events}getEvents$(){return this.events$.asObservable()}getEventById(t){return this.events.find(e=>e.id===t)}addEvent(t){return s(this,null,function*(){let e=this.events.length>0?Math.max(...this.events.map(g=>g.id))+1:0,i=p({id:e},t);return this.events.push(i),yield this.saveEvents(),i})}updateEvent(t,e){return s(this,null,function*(){let i=this.getEventById(t);if(i)return Object.assign(i,e),yield this.saveEvents(),i})}deleteEvent(t){return s(this,null,function*(){let e=this.events.findIndex(i=>i.id===t);return e>-1?(this.events.splice(e,1),yield this.saveEvents(),!0):!1})}};a.\u0275fac=function(e){return new(e||a)(o(d))},a.\u0275prov=r({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();export{E as a};
